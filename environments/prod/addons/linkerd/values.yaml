# Linkerd Control Plane - Production Environment

# High availability for production
controllerReplicas: 3

# Override default to use External Secrets
identity:
  externalCA: false  # Use internal CA with external secret management
  issuer:
    scheme: kubernetes.io/tls  # Use manual certificate management
    clockSkewAllowance: 20s
    issuanceLifetime: 24h0m0s

# Use External Secrets for certificate management
certificates:
  externalSecrets:
    enabled: true
    secretName: "linkerd-certificates-prod"
  bootstrap:
    enabled: true  # Enable certificate bootstrap for production
  rotation:
    enabled: true  # Enable certificate rotation for production

# Full production resources
resources:
  cpu:
    limit: 2
    request: 200m
  memory:
    limit: 512Mi
    request: 100Mi

# Proxy sidecar resources for production
proxy:
  resources:
    cpu:
      limit: 2
      request: 100m
    memory:
      limit: 512Mi
      request: 32Mi

# Strict security policy for production
policyController:
  defaultPolicy: "deny"
