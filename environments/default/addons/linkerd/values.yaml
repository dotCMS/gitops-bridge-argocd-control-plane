# Linkerd Control Plane Default Configuration

# Use external secret management for security
identity:
  issuer:
    scheme: kubernetes.io/tls  # Reference external secret
    clockSkewAllowance: 20s
    issuanceLifetime: 24h0m0s

# Trust anchor (root certificate) - safe to store in Git
identityTrustAnchorsPEM: |
  -----BEGIN CERTIFICATE-----
  MIIBsjCCAVmgAwIBAgIRAOXmKA8Vd7XU/+Nai4+RGKYwCgYIKoZIzj0EAwIwJTEj
  MCEGA1UEAxMacm9vdC5saW5rZXJkLmNsdXN0ZXIubG9jYWwwHhcNMjUwOTIyMTUy
  NTE4WhcNMjYwOTIyMTUyNTE4WjApMScwJQYDVQQDEx5pZGVudGl0eS5saW5rZXJk
  LmNsdXN0ZXIubG9jYWwwWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAAS4YS7gR0zx
  FJ6yqVz+V2Ty1AYBXYm8UF1Z0oL5TBr5WE1ViLzj9tDW6ALnEbyQsxyCmG3fWpge
  sHSLeH41VwIdo2YwZDAOBgNVHQ8BAf8EBAMCAQYwEgYDVR0TAQH/BAgwBgEB/wIB
  ADAdBgNVHQ4EFgQUoUxZn6PISmhX+V7ckNMNYeQlUEEwHwYDVR0jBBgwFoAUg3xA
  Mk3SCqyVA+ajrvnnDmNGEy8wCgYIKoZIzj0EAwIDRwAwRAIgGq695jK5NptnqMFn
  PJNZ5lBFVr8CZblI8KMjRbXnAZUCIDCK7L0qexVnxCemTKFDFsxkB3FAG8mqHXPG
  AmQC6ZhJ
  -----END CERTIFICATE-----

# AWS configuration (will be provided by ApplicationSet)
aws:
  region: ""  # Will be set by ApplicationSet

# Environment (will be provided by ApplicationSet)
environment: ""  # Will be set by ApplicationSet

# High availability configuration
controllerReplicas: 1  # Will be overridden in staging/prod

# Resource configuration
resources:
  cpu:
    limit: 1
    request: 100m
  memory:
    limit: 250Mi
    request: 50Mi

# Proxy configuration
proxy:
  resources:
    cpu:
      limit: 1
      request: 100m
    memory:
      limit: 250Mi
      request: 20Mi

# Enable default policy mode (recommended for security)
policyController:
  defaultPolicy: "deny"

# cert-manager integration (disabled by default)
certManager:
  enabled: false
  # For production environments, provide your organization's root CA
  trustAnchor: ""     # Root CA certificate (PEM format)
  trustAnchorKey: ""  # Root CA private key (PEM format)

# Observability integration
# These will integrate with your existing Prometheus/Grafana
prometheusUrl: ""  # Set by ApplicationSet
grafanaUrl: ""     # Set by ApplicationSet

# Debug configuration for development
debugContainer:
  image:
    name: cr.l5d.io/linkerd/debug
    pullPolicy: Always
